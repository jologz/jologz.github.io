(this["webpackJsonpstardog-react-typescript"]=this["webpackJsonpstardog-react-typescript"]||[]).push([[0],{154:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(10),i=n.n(o),s=n(80),d=n(107),u=n(201),l=n(6),j=function(e){var t=e.children;return Object(l.jsx)(u.a,{maxWidth:"xl",children:Object(l.jsx)(l.Fragment,{children:t})})},p=function(e,t){return function(){return e(t.apply(void 0,arguments))}},b=function(e){return void 0===e?"":e},h=function(e){return function(t){return"string"===typeof t?e+t:t.map((function(t){return e+t}))}},f=n(8),O="AIzaSyAadUP2NWA7k4M_QseUZZzse5OE_rey3A0",m=n(108),x="PREFIX wd: <http://www.wikidata.org/entity/>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\nPREFIX p: <http://www.wikidata.org/prop/>\nPREFIX ps: <http://www.wikidata.org/prop/statement/>\nPREFIX psv: <http://www.wikidata.org/prop/statement/value/>\nPREFIX wikibase: <http://wikiba.se/ontology#>\n\nSELECT ?countyName ?cases ?population ?percentCases ?lat ?lng\n{\n    # get the latest date\n    { SELECT (max(?d) as ?date) { ?r :date ?d } }\n\n    # get all the reports for the latest date\n    ?report\n        :cases ?cases  ;\n        :date ?date ;                \n        :county [\n            rdfs:label ?countyName ;\n            :fips ?fips\n        ]    \n\n    # Get coordinates of\n    SERVICE <https://query.wikidata.org/sparql> \n    {\n        SELECT * {\n            ?item wdt:P882 ?fips ;\n                  wdt:P1082 ?population ;\n                  p:P625 ?coordPoint .\n            ?coordPoint psv:P625 ?coord_node .\n            ?coord_node wikibase:geoLongitude ?lng ;\n                        wikibase:geoLatitude ?lat .\n        }\n    }   \n    # compute percentages\n    BIND(roundHalfToEven((?cases / ?population) * 100, 2) AS ?percentCases)\n}\nORDER BY desc(?percentCases)",w=n(81),v=n.n(w),g=n(103),y=n(72),C=Object(a.createContext)({connection:{},dbName:""}),E=function(e){var t=e.username,n=e.password,r=e.endpoint,a=e.dbName,c=e.children,o=new y.Connection({username:t,password:n,endpoint:r});return Object(l.jsx)(C.Provider,{value:{connection:o,dbName:a},children:c})},k=function(){var e=Object(a.useContext)(C),t=e.connection,n=e.dbName,r=Object(a.useState)(!1),c=Object(f.a)(r,2),o=c[0],i=c[1],s=Object(a.useState)(),d=Object(f.a)(s,2),u=d[0],l=d[1],j=Object(a.useState)(null),p=Object(f.a)(j,2),b=p[0],h=p[1];return[Object(a.useCallback)(function(){var e=Object(g.a)(v.a.mark((function e(r){var a,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.readQuery,i(!0),e.next=4,y.query.execute(t,n,a);case 4:if((c=e.sent).ok){e.next=9;break}return l({status:c.status,statusText:c.statusText}),i(!1),e.abrupt("return");case 9:o=c.body.results.bindings,h(o),i(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,n]),{error:u,loading:o,data:b}]},N=function(){var e,t=k(),n=Object(f.a)(t,2),r=n[0],c=n[1],o=c.loading,i=c.error,s=c.data,d=Object(a.useState)([]),u=Object(f.a)(d,2),j=u[0],p=u[1];return Object(a.useEffect)((function(){r({readQuery:x})}),[r]),Object(a.useEffect)((function(){if(s){var e=s.map((function(e,t){return Object.keys(e).filter((function(e){return["lat","lng","percentCases"].includes(e)})).reduce((function(t,n){return"percentCases"===n?t.weight=Number(e[n].value):t[n]=Number(e[n].value),t}),{})}));p(e)}}),[s]),o?Object(l.jsx)("div",{children:"Loading..."}):i?Object(l.jsx)("div",{children:"Error getting data..."}):Object(l.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(l.jsx)(m.a,{bootstrapURLKeys:{key:null!==(e=O)&&void 0!==e?e:"",libraries:["visualization"]},defaultCenter:{lat:39.8283,lng:-98.5795},defaultZoom:5,heatmap:{positions:j,options:{opacity:.6,radius:50}}})})},P=n(207),S=n(49),F=n(113),I=n(104),R=function(e){var t=e.rows,n=e.columns;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(F.a,{component:"h2",children:"COVID19 Counties With Most Cases"}),Object(l.jsx)("div",{style:{width:1010,height:600},children:Object(l.jsx)(I.a,{rows:t,columns:n})})]})},L=function(){var e=k(),t=Object(f.a)(e,2),n=t[0],r=t[1],c=r.loading,o=r.error,i=r.data,s=Object(a.useMemo)((function(){return[{field:"countyName",headerName:"County Name",width:250},{field:"percentCases",headerName:"Percent Cases",width:150},{field:"population",headerName:"Population",width:150},{field:"cases",headerName:"Cases",width:150},{field:"lat",headerName:"Latitude",width:150},{field:"lng",headerName:"Longitude",width:150}]}),[]),d=Object(a.useState)([]),u=Object(f.a)(d,2),j=u[0],p=u[1];return Object(a.useEffect)((function(){if(i){var e=i.map((function(e,t){var n=Object.keys(e).reduce((function(t,n){return t[n]=e[n].value,t}),{});return n.id=t.toString(),n}));p(e)}}),[i]),Object(a.useEffect)((function(){n({readQuery:x})}),[n]),c?Object(l.jsx)("div",{children:"Loading..."}):o?Object(l.jsx)("div",{children:"Error getting data..."}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(R,{rows:j,columns:s}),Object(l.jsx)(P.a,{component:S.b,to:"/heatmap",children:"Heatmap"})]})},T=(r=[{path:"/heatmap",exact:!0,childComponent:function(){return Object(l.jsx)(N,{})}},{path:["/","/home"],exact:!0,childComponent:function(){return Object(l.jsx)(j,{children:Object(l.jsx)(L,{})})}}],function(e){return r.map((function(t,n){var r=t.path,a=t.exact;return{ChildComponent:t.childComponent,computedPath:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduceRight(p)}(b,h)(e)(r),key:n.toString(),exact:a}}))}),A=function(){return Object(l.jsx)("div",{children:"Oops! 404."})},X=n(17),M=function(){return Object(l.jsxs)(X.c,{children:[T().map((function(e){var t=e.ChildComponent,n=e.computedPath,r=Object(d.a)(e,["ChildComponent","computedPath"]);return Object(l.jsx)(X.a,Object(s.a)(Object(s.a)({path:n},r),{},{children:Object(l.jsx)(t,{})}))})),Object(l.jsx)(X.a,{children:Object(l.jsx)(A,{})})]})},Q=n(208),_=n(204),q=n(97),z=n(50),B=Object(q.a)(Object(z.a)({typography:{button:{textTransform:"unset"}}})),D=function(){return Object(l.jsx)("div",{children:"You are forbidden!"})},U=function(e){var t,n,r=e.children,a=Object(X.f)();return(null===a||void 0===a||null===(t=a.state)||void 0===t?void 0:t.notFound)?Object(l.jsx)(A,{}):(null===a||void 0===a||null===(n=a.state)||void 0===n?void 0:n.forbidden)?Object(l.jsx)(D,{}):Object(l.jsx)(l.Fragment,{children:r})},W=function(e){var t=e.children;return Object(l.jsx)(E,{dbName:"covid19nyt",username:"anonymous",password:"anonymous",endpoint:"https://express.stardog.cloud:5820",children:Object(l.jsx)(S.a,{children:Object(l.jsxs)(U,{children:[Object(l.jsx)(Q.a,{}),Object(l.jsx)(_.a,{theme:B,children:t})]})})})};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(W,{children:Object(l.jsx)(M,{})})}),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.ebbe7f87.chunk.js.map